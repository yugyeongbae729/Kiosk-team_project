<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>접수하기(기초) 3</title>
    <link rel="stylesheet" href="/HosBasicKio/hospitalKioskB3.css">
</head>

<body>
    <audio src="/voice/hpJinryo.mp3" autoplay>아무런 오디오도 없습니다.</audio>    <div class="hospitalContainer">
        <header>
            <div class="headButton">
                <button id="headLearnBt">◀ 이전으로</button>
                <button id="headLearnBtRight">처음으로 ▶</button>
                <button id="headImgBtn"><img src="/pic/학습저장별.png" alt="" id="headImg"></button>
            </div>
            <h1 id="hTitle">손주병원</h1>
        </header>
        <div class="options">
            <div class="option">
                <img src="/123GIF/1.gif" alt="1gif" id="oneGif">
                <h2>접수 내용을 확인하시고 진료실을 선택해주세요</h2>
                <button class="learn5Bt">김*들(53년생) | 남자 | 최근 진료일 | 202*. 07. 28</button>
                <h2 id="roomCh">진료실 선택</h2>
                <button class="roomBt roomHighlight" id="roomBt1">
                    <img src="/hospitalImg/green_c.png" alt="" class="roomIcon">
                    <span class="roomNumber">1진료실</span> | 선영* 원장
                </button>
                <button class="roomBt" id="roomBt2">
                    <img src="/hospitalImg/green_c.png" alt="" class="roomIcon">
                    <span class="roomNumber">2진료실</span> | 배유* 원장
                </button>
            </div>
            <div class="captionContainer" id="captionModal">
                <div class="captionBox">
                    접수자 정보를 확인하시고<br>
                    진료를 받을<br>
                    <span id="buttonText">[진료실]</span>을 선택해주세요.
                </div>
            </div>
        </div>

        <script>
            const headLearnBt = document.getElementById('headLearnBt')
            headLearnBt.addEventListener('click', ()=>{
            location.href='/hospitalB2'})

            document.getElementById('roomBt1').addEventListener('click', () => {
                location.href = '/hospitalB4';
            });

            const headLearnBtRight = document.getElementById('headLearnBtRight')
            headLearnBtRight.addEventListener('click', ()=>{
            location.href='/'})

            const hTitle = document.getElementById('hTitle')
            hTitle.addEventListener('click', ()=>{
            location.href='/hospital'})

            const infoPageNum = 3;
            const infoPageName = '접수하기(기초) 3';
            document.getElementById('headImgBtn').addEventListener('click', () => {
                fetch('/kiosk/save-page-info', { // 수정된 경로
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    credentials: 'include', // 세션 쿠키를 서버에 포함
                    body: JSON.stringify({ infoPageNum: infoPageNum, infoPageName:infoPageName }) // 페이지 번호, 제목 포함해 전송
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        alert('페이지 정보가 저장되었습니다.');
                    } else {
                        alert(data.message); // 로그인하지 않은 경우의 메시지
                    }
                })
                .catch(error => console.error('Error:', error));
            });

        </script>
    </div>
</body>

</html>
